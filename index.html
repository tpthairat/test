<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phone Store - ‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .slide-up { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-indigo-600">üì± PhoneStore</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="adminBtn" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                        ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                    <button id="logoutBtn" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors hidden">
                        ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div id="mainContent" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Hero Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</h1>
            <p class="text-xl text-gray-600">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏µ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
        </div>

        <!-- Products Grid -->
        <div id="productsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Products will be loaded here -->
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="text-center py-12">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"></div>
            <p class="mt-4 text-gray-600">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
        </div>

        <!-- Firebase Setup Notice -->
        <div id="firebaseNotice" class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8 hidden">
            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-blue-800">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase</h3>
                    <div class="mt-2 text-sm text-blue-700">
                        <p class="mb-2">‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase ‡∏à‡∏£‡∏¥‡∏á:</p>
                        <ol class="list-decimal list-inside space-y-1 ml-4">
                            <li>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Å‡∏ï‡πå‡πÉ‡∏ô <a href="https://console.firebase.google.com" target="_blank" class="underline">Firebase Console</a></li>
                            <li>‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Authentication ‡πÅ‡∏•‡∏∞ Firestore Database</li>
                            <li>‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà Firebase config ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î</li>
                            <li>‡∏™‡∏£‡πâ‡∏≤‡∏á collection ‡∏ä‡∏∑‡πà‡∏≠ "products" ‡πÉ‡∏ô Firestore</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4 slide-up">
            <h2 class="text-2xl font-bold text-center mb-6">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h2>
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                    <input type="email" id="loginEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="loginPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                </div>
                <div class="flex justify-between">
                    <button type="button" id="cancelLogin" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                    <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                        ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="fixed inset-0 bg-white z-50 hidden overflow-y-auto">
        <div class="bg-indigo-600 text-white p-4">
            <div class="flex justify-between items-center">
                <h2 class="text-2xl font-bold">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                <button id="closeAdmin" class="bg-indigo-700 px-4 py-2 rounded-lg hover:bg-indigo-800 transition-colors">
                    ‡∏õ‡∏¥‡∏î
                </button>
            </div>
        </div>

        <div class="p-6">
            <!-- Add Product Form -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h3 class="text-xl font-bold mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</h3>
                <form id="addProductForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                        <input type="text" id="productName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="productPrice" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠</label>
                        <input type="text" id="productBrand" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏∏‡πà‡∏ô</label>
                        <input type="text" id="productModel" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡∏™‡∏µ</label>
                        <input type="text" id="productColor" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å</label>
                        <input type="number" id="productStock" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
                        <textarea id="productDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required></textarea>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-gray-700 text-sm font-bold mb-2">URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
                        <input type="url" id="productImage" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="md:col-span-2">
                        <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                        </button>
                    </div>
                </form>
            </div>

            <!-- Products Management -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                <div id="adminProductsList" class="space-y-4">
                    <!-- Admin products list will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-screen overflow-y-auto slide-up">
            <h2 class="text-2xl font-bold text-center mb-6">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
            <form id="editProductForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="hidden" id="editProductId">
                <div>
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                    <input type="text" id="editProductName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                </div>
                <div>
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
                    <input type="number" id="editProductPrice" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                </div>
                <div>
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠</label>
                    <input type="text" id="editProductBrand" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                </div>
                <div>
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏∏‡πà‡∏ô</label>
                    <input type="text" id="editProductModel" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                </div>
                <div>
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏™‡∏µ</label>
                    <input type="text" id="editProductColor" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                </div>
                <div>
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å</label>
                    <input type="number" id="editProductStock" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required>
                </div>
                <div class="md:col-span-2">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
                    <textarea id="editProductDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500" required></textarea>
                </div>
                <div class="md:col-span-2">
                    <label class="block text-gray-700 text-sm font-bold mb-2">URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
                    <input type="url" id="editProductImage" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500">
                </div>
                <div class="md:col-span-2 flex justify-between">
                    <button type="button" id="cancelEdit" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Firebase Configuration - Replace with your config
        const firebaseConfig = {
            apiKey: "AIzaSyAmsiJelUN1V8C9mCC1Osy-uSZAuk3M7Lw",
  authDomain: "test-95403.firebaseapp.com",
  databaseURL: "https://test-95403-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "test-95403",
  storageBucket: "test-95403.firebasestorage.app",
  messagingSenderId: "30370027223",
  appId: "1:30370027223:web:be434cdf70770ea44f4292",
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Global variables
        let currentUser = null;
        let products = [];

        // DOM Elements
        const adminBtn = document.getElementById('adminBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const loginModal = document.getElementById('loginModal');
        const adminPanel = document.getElementById('adminPanel');
        const editModal = document.getElementById('editModal');
        const productsGrid = document.getElementById('productsGrid');
        const loadingState = document.getElementById('loadingState');

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            setupEventListeners();
            
            // Check auth state
            auth.onAuthStateChanged(user => {
                currentUser = user;
                if (user) {
                    adminBtn.textContent = '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö';
                    logoutBtn.classList.remove('hidden');
                } else {
                    adminBtn.textContent = '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö';
                    logoutBtn.classList.add('hidden');
                }
            });
        });

        // Setup event listeners
        function setupEventListeners() {
            // Admin button
            adminBtn.addEventListener('click', () => {
                if (currentUser) {
                    showAdminPanel();
                } else {
                    showLoginModal();
                }
            });

            // Logout button
            logoutBtn.addEventListener('click', logout);

            // Login modal
            document.getElementById('cancelLogin').addEventListener('click', hideLoginModal);
            document.getElementById('loginForm').addEventListener('submit', handleLogin);

            // Admin panel
            document.getElementById('closeAdmin').addEventListener('click', hideAdminPanel);
            document.getElementById('addProductForm').addEventListener('submit', handleAddProduct);

            // Edit modal
            document.getElementById('cancelEdit').addEventListener('click', hideEditModal);
            document.getElementById('editProductForm').addEventListener('submit', handleEditProduct);

            // Close modals on outside click
            loginModal.addEventListener('click', (e) => {
                if (e.target === loginModal) hideLoginModal();
            });
            editModal.addEventListener('click', (e) => {
                if (e.target === editModal) hideEditModal();
            });
        }

        // Authentication functions
        function showLoginModal() {
            loginModal.classList.remove('hidden');
            loginModal.classList.add('flex');
        }

        function hideLoginModal() {
            loginModal.classList.add('hidden');
            loginModal.classList.remove('flex');
            document.getElementById('loginForm').reset();
        }

        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                await auth.signInWithEmailAndPassword(email, password);
                hideLoginModal();
                showAdminPanel();
                showNotification('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            } catch (error) {
                showNotification('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + error.message, 'error');
            }
        }

        async function logout() {
            try {
                await auth.signOut();
                hideAdminPanel();
                showNotification('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            } catch (error) {
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message, 'error');
            }
        }

        // Admin panel functions
        function showAdminPanel() {
            adminPanel.classList.remove('hidden');
            loadAdminProducts();
        }

        function hideAdminPanel() {
            adminPanel.classList.add('hidden');
        }

        // Product management functions
        async function loadProducts() {
            try {
                loadingState.style.display = 'block';
                const snapshot = await db.collection('products').get();
                products = [];
                snapshot.forEach(doc => {
                    products.push({ id: doc.id, ...doc.data() });
                });
                displayProducts();
                loadingState.style.display = 'none';
            } catch (error) {
                console.error('Error loading products:', error);
                loadingState.style.display = 'none';
                document.getElementById('firebaseNotice').classList.remove('hidden');
                // Show sample data if Firebase is not configured
                showSampleData();
            }
        }

        function showSampleData() {
            products = [
                {
                    id: 'sample1',
                    name: 'iPhone 15 Pro Max',
                    price: 44900,
                    brand: 'Apple',
                    model: 'iPhone 15 Pro Max',
                    color: 'Natural Titanium',
                    stock: 12,
                    description: 'iPhone 15 Pro Max ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ 6.7 ‡∏ô‡∏¥‡πâ‡∏ß ‡∏ä‡∏¥‡∏õ A17 Pro ‡∏Å‡∏•‡πâ‡∏≠‡∏á Pro 48MP ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö Action Button',
                    image: 'https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=400&fit=crop&crop=center'
                },
                {
                    id: 'sample2',
                    name: 'Samsung Galaxy S24 Ultra',
                    price: 42900,
                    brand: 'Samsung',
                    model: 'Galaxy S24 Ultra',
                    color: 'Titanium Black',
                    stock: 8,
                    description: 'Galaxy S24 Ultra ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ 6.8 ‡∏ô‡∏¥‡πâ‡∏ß ‡∏Å‡∏•‡πâ‡∏≠‡∏á 200MP ‡∏û‡∏£‡πâ‡∏≠‡∏° S Pen ‡πÅ‡∏•‡∏∞ AI ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î',
                    image: 'https://images.unsplash.com/photo-1610945265064-0e34e5519bbf?w=400&h=400&fit=crop&crop=center'
                },
                {
                    id: 'sample3',
                    name: 'Google Pixel 8 Pro',
                    price: 32900,
                    brand: 'Google',
                    model: 'Pixel 8 Pro',
                    color: 'Obsidian',
                    stock: 3,
                    description: 'Pixel 8 Pro ‡∏Å‡∏•‡πâ‡∏≠‡∏á AI ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ 6.7 ‡∏ô‡∏¥‡πâ‡∏ß 120Hz ‡∏û‡∏£‡πâ‡∏≠‡∏° Magic Eraser',
                    image: 'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400&h=400&fit=crop&crop=center'
                },
                {
                    id: 'sample4',
                    name: 'iPhone 14',
                    price: 28900,
                    brand: 'Apple',
                    model: 'iPhone 14',
                    color: 'Midnight',
                    stock: 15,
                    description: 'iPhone 14 ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ 6.1 ‡∏ô‡∏¥‡πâ‡∏ß ‡∏ä‡∏¥‡∏õ A15 Bionic ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏Ñ‡∏π‡πà 12MP ‡∏£‡∏∞‡∏ö‡∏ö Crash Detection',
                    image: 'https://images.unsplash.com/photo-1678652197831-2d180705cd2c?w=400&h=400&fit=crop&crop=center'
                },
                {
                    id: 'sample5',
                    name: 'Samsung Galaxy A54',
                    price: 13900,
                    brand: 'Samsung',
                    model: 'Galaxy A54',
                    color: 'Awesome Violet',
                    stock: 0,
                    description: 'Galaxy A54 ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ 6.4 ‡∏ô‡∏¥‡πâ‡∏ß Super AMOLED ‡∏Å‡∏•‡πâ‡∏≠‡∏á 50MP ‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà 5000mAh',
                    image: 'https://images.unsplash.com/photo-1567581935884-3349723552ca?w=400&h=400&fit=crop&crop=center'
                },
                {
                    id: 'sample6',
                    name: 'Xiaomi 13T Pro',
                    price: 19900,
                    brand: 'Xiaomi',
                    model: '13T Pro',
                    color: 'Meadow Green',
                    stock: 7,
                    description: 'Xiaomi 13T Pro ‡∏Å‡∏•‡πâ‡∏≠‡∏á Leica 50MP ‡∏ä‡∏≤‡∏£‡πå‡∏à‡πÄ‡∏£‡πá‡∏ß 120W ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ 6.67 ‡∏ô‡∏¥‡πâ‡∏ß 144Hz',
                    image: 'https://images.unsplash.com/photo-1598300042247-d088f8ab3a91?w=400&h=400&fit=crop&crop=center'
                }
            ];
            displayProducts();
            loadingState.style.display = 'none';
        }

        function displayProducts() {
            productsGrid.innerHTML = '';
            products.forEach(product => {
                const productCard = createProductCard(product);
                productsGrid.appendChild(productCard);
            });
        }

        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 fade-in';
            
            const stockStatus = product.stock > 0 ? 
                `<span class="text-green-600 font-medium">‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (${product.stock} ‡∏ä‡∏¥‡πâ‡∏ô)</span>` :
                `<span class="text-red-600 font-medium">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î</span>`;
            
            card.innerHTML = `
                <div class="relative">
                    <div class="aspect-square bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center overflow-hidden">
                        ${product.image ? 
                            `<img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                             <div class="absolute inset-0 bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center text-6xl" style="display:none;">üì±</div>` :
                            `<div class="text-6xl text-indigo-400">üì±</div>`
                        }
                    </div>
                    ${product.stock <= 5 && product.stock > 0 ? 
                        `<div class="absolute top-2 right-2 bg-orange-500 text-white text-xs px-2 py-1 rounded-full">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢</div>` : 
                        product.stock === 0 ? 
                        `<div class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">‡∏´‡∏°‡∏î</div>` : ''
                    }
                </div>
                <div class="p-6">
                    <div class="mb-3">
                        <h3 class="text-xl font-bold text-gray-900 mb-1">${product.name}</h3>
                        <p class="text-indigo-600 font-medium text-lg">${product.brand} ${product.model}</p>
                    </div>
                    
                    <div class="mb-4 space-y-2">
                        <div class="flex items-center justify-between">
                            <span class="text-gray-600">‡∏™‡∏µ:</span>
                            <span class="font-medium text-gray-800">${product.color}</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-600">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</span>
                            ${stockStatus}
                        </div>
                    </div>
                    
                    <p class="text-sm text-gray-600 mb-4 line-clamp-2">${product.description}</p>
                    
                    <div class="border-t pt-4">
                        <div class="flex justify-between items-center mb-4">
                            <div>
                                <span class="text-3xl font-bold text-indigo-600">‡∏ø${product.price.toLocaleString()}</span>
                                <p class="text-xs text-gray-500">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏° VAT</p>
                            </div>
                        </div>
                        
                        <button class="w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 ${
                            product.stock > 0 ? 
                            'bg-indigo-600 hover:bg-indigo-700 text-white hover:shadow-lg' : 
                            'bg-gray-300 text-gray-500 cursor-not-allowed'
                        }" ${product.stock === 0 ? 'disabled' : ''}>
                            ${product.stock > 0 ? 'üõí ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ' : '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î'}
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }

        async function loadAdminProducts() {
            const adminProductsList = document.getElementById('adminProductsList');
            adminProductsList.innerHTML = '';
            
            products.forEach(product => {
                const productItem = createAdminProductItem(product);
                adminProductsList.appendChild(productItem);
            });
        }

        function createAdminProductItem(product) {
            const item = document.createElement('div');
            item.className = 'border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow';
            
            const stockBadge = product.stock > 10 ? 
                `<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠</span>` :
                product.stock > 0 ? 
                `<span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏ô‡πâ‡∏≠‡∏¢</span>` :
                `<span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">‡∏´‡∏°‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Å</span>`;
            
            item.innerHTML = `
                <div class="flex items-start space-x-4">
                    <div class="w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0">
                        ${product.image ? 
                            `<img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                             <div class="w-full h-full flex items-center justify-center text-2xl text-gray-400" style="display:none;">üì±</div>` :
                            `<div class="text-2xl text-gray-400">üì±</div>`
                        }
                    </div>
                    
                    <div class="flex-1 min-w-0">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h4 class="font-bold text-lg text-gray-900 truncate">${product.name}</h4>
                                <p class="text-indigo-600 font-medium">${product.brand} ${product.model}</p>
                                <p class="text-gray-600 text-sm">‡∏™‡∏µ: ${product.color}</p>
                                <p class="text-gray-500 text-sm mt-1 line-clamp-2">${product.description}</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between mt-3">
                            <div class="flex items-center space-x-4">
                                <span class="text-xl font-bold text-indigo-600">‡∏ø${product.price.toLocaleString()}</span>
                                <div class="flex items-center space-x-2">
                                    <span class="text-sm text-gray-600">‡∏™‡∏ï‡πá‡∏≠‡∏Å: ${product.stock}</span>
                                    ${stockBadge}
                                </div>
                            </div>
                            
                            <div class="flex space-x-2">
                                <button onclick="editProduct('${product.id}')" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium">
                                    ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                </button>
                                <button onclick="deleteProduct('${product.id}')" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm font-medium">
                                    üóëÔ∏è ‡∏•‡∏ö
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return item;
        }

        async function handleAddProduct(e) {
            e.preventDefault();
            
            const productData = {
                name: document.getElementById('productName').value,
                price: parseInt(document.getElementById('productPrice').value),
                brand: document.getElementById('productBrand').value,
                model: document.getElementById('productModel').value,
                color: document.getElementById('productColor').value,
                stock: parseInt(document.getElementById('productStock').value),
                description: document.getElementById('productDescription').value,
                image: document.getElementById('productImage').value || '',
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            };

            try {
                const docRef = await db.collection('products').add(productData);
                products.push({ id: docRef.id, ...productData });
                displayProducts();
                loadAdminProducts();
                document.getElementById('addProductForm').reset();
                showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            } catch (error) {
                console.error('Error adding product:', error);
                // For demo purposes, add to local array
                const newProduct = { id: 'demo_' + Date.now(), ...productData };
                products.push(newProduct);
                displayProducts();
                loadAdminProducts();
                document.getElementById('addProductForm').reset();
                showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö)', 'success');
            }
        }

        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            document.getElementById('editProductId').value = product.id;
            document.getElementById('editProductName').value = product.name;
            document.getElementById('editProductPrice').value = product.price;
            document.getElementById('editProductBrand').value = product.brand;
            document.getElementById('editProductModel').value = product.model;
            document.getElementById('editProductColor').value = product.color;
            document.getElementById('editProductStock').value = product.stock;
            document.getElementById('editProductDescription').value = product.description;
            document.getElementById('editProductImage').value = product.image || '';

            showEditModal();
        }

        function showEditModal() {
            editModal.classList.remove('hidden');
            editModal.classList.add('flex');
        }

        function hideEditModal() {
            editModal.classList.add('hidden');
            editModal.classList.remove('flex');
            document.getElementById('editProductForm').reset();
        }

        async function handleEditProduct(e) {
            e.preventDefault();
            
            const productId = document.getElementById('editProductId').value;
            const updatedData = {
                name: document.getElementById('editProductName').value,
                price: parseInt(document.getElementById('editProductPrice').value),
                brand: document.getElementById('editProductBrand').value,
                model: document.getElementById('editProductModel').value,
                color: document.getElementById('editProductColor').value,
                stock: parseInt(document.getElementById('editProductStock').value),
                description: document.getElementById('editProductDescription').value,
                image: document.getElementById('editProductImage').value || '',
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            };

            try {
                await db.collection('products').doc(productId).update(updatedData);
                const productIndex = products.findIndex(p => p.id === productId);
                products[productIndex] = { id: productId, ...updatedData };
                displayProducts();
                loadAdminProducts();
                hideEditModal();
                showNotification('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            } catch (error) {
                console.error('Error updating product:', error);
                // For demo purposes, update local array
                const productIndex = products.findIndex(p => p.id === productId);
                products[productIndex] = { id: productId, ...updatedData };
                displayProducts();
                loadAdminProducts();
                hideEditModal();
                showNotification('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö)', 'success');
            }
        }

        async function deleteProduct(productId) {
            if (!confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ?')) return;

            try {
                await db.collection('products').doc(productId).delete();
                products = products.filter(p => p.id !== productId);
                displayProducts();
                loadAdminProducts();
                showNotification('‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            } catch (error) {
                console.error('Error deleting product:', error);
                // For demo purposes, remove from local array
                products = products.filter(p => p.id !== productId);
                displayProducts();
                loadAdminProducts();
                showNotification('‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö)', 'success');
            }
        }

        // Notification function
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white font-medium slide-up ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 'bg-blue-500'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96e7f2d9d48845b3',t:'MTc1NTA4NTM0Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
